"use strict";(self.webpackChunkts_sb_react_material_gemini_agent_key=self.webpackChunkts_sb_react_material_gemini_agent_key||[]).push([[980],{"./src/stories/App.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>App_stories});var createTheme=__webpack_require__("./node_modules/@mui/material/styles/createTheme.js"),ThemeProvider=__webpack_require__("./node_modules/@mui/material/styles/ThemeProvider.js"),CssBaseline=__webpack_require__("./node_modules/@mui/material/CssBaseline/CssBaseline.js"),react=__webpack_require__("./node_modules/react/index.js"),Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),Paper=__webpack_require__("./node_modules/@mui/material/Paper/Paper.js"),TextField=__webpack_require__("./node_modules/@mui/material/TextField/TextField.js"),Button=__webpack_require__("./node_modules/@mui/material/Button/Button.js"),CircularProgress=__webpack_require__("./node_modules/@mui/material/CircularProgress/CircularProgress.js"),Alert=__webpack_require__("./node_modules/@mui/material/Alert/Alert.js"),dist=__webpack_require__("./node_modules/@google/generative-ai/dist/index.mjs"),lib=__webpack_require__("./node_modules/react-markdown/lib/index.js"),Accordion=__webpack_require__("./node_modules/@mui/material/Accordion/Accordion.js"),AccordionSummary=__webpack_require__("./node_modules/@mui/material/AccordionSummary/AccordionSummary.js"),AccordionDetails=__webpack_require__("./node_modules/@mui/material/AccordionDetails/AccordionDetails.js"),Stack=__webpack_require__("./node_modules/@mui/material/Stack/Stack.js"),ArrowForwardIosSharp=__webpack_require__("./node_modules/@mui/icons-material/esm/ArrowForwardIosSharp.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const AgentKey=_ref=>{let{apiKey,setApiKey,deleteKey}=_ref;return(0,jsx_runtime.jsxs)(Accordion.A,{elevation:3,children:[(0,jsx_runtime.jsx)(AccordionSummary.A,{expandIcon:(0,jsx_runtime.jsx)(ArrowForwardIosSharp.A,{}),sx:{flexDirection:"row-reverse",".Mui-expanded & .MuiAccordionSummary-expandIconWrapper":{transform:"rotate(90deg)"}},children:(0,jsx_runtime.jsx)(Typography.A,{variant:"h6",sx:{ml:2},children:"Gemini API Key"})}),(0,jsx_runtime.jsx)(AccordionDetails.A,{children:(0,jsx_runtime.jsxs)(Stack.A,{spacing:{xs:1,sm:2},children:[(0,jsx_runtime.jsx)(TextField.A,{autoComplete:"off",fullWidth:!0,type:"password",label:"Enter your key",value:apiKey,onChange:event=>{setApiKey(event.target.value)}}),(0,jsx_runtime.jsx)(Button.A,{onClick:()=>{deleteKey()},variant:"contained",color:"error",children:"Delete Key"})]})})]})},AgentKey_AgentKey=AgentKey;AgentKey.__docgenInfo={description:"",methods:[],displayName:"AgentKey",props:{apiKey:{required:!0,tsType:{name:"string"},description:""},setApiKey:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},deleteKey:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const GeminiChat=()=>{const[apiKey,setApiKey]=(0,react.useState)((()=>{try{const savedData=localStorage.getItem("API_KEY");if(savedData){const parsedData=JSON.parse(savedData);if(parsedData.length>0)return parsedData}}catch(error){console.error("Error load from localStorage key API_KEY:",error)}return""})),[input,setInput]=(0,react.useState)(""),[response,setResponse]=(0,react.useState)(""),[loading,setLoading]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(""),genAI=(0,react.useMemo)((()=>new dist.ij(apiKey)),[apiKey]);(0,react.useEffect)((()=>{try{const valueToStore=JSON.stringify(apiKey);localStorage.setItem("API_KEY",valueToStore)}catch(error){console.error("Error saving to localStorage key API_KEY:",error)}}),[apiKey]);return(0,jsx_runtime.jsxs)(Box.A,{sx:{maxWidth:800,margin:"auto",p:3,minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,jsx_runtime.jsx)(Typography.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Gemini Chat Interface"}),(0,jsx_runtime.jsx)(Paper.A,{elevation:3,sx:{p:3,mt:1},children:(0,jsx_runtime.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),input.trim()){setLoading(!0),setError("");try{const model=genAI.getGenerativeModel({model:"gemini-1.5-flash"}),result=await model.generateContent(input),text=await result.response.text();setResponse(text)}catch(err){setError("Error: "+(err instanceof Error?err.message:"Failed to fetch")),console.error("API Error:",err)}finally{setLoading(!1)}}},children:[(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,multiline:!0,minRows:3,maxRows:6,label:"Enter your question",variant:"outlined",value:input,onChange:e=>setInput(e.target.value),sx:{mb:2},disabled:loading}),(0,jsx_runtime.jsx)(Button.A,{type:"submit",variant:"contained",color:"primary",disabled:loading,startIcon:loading?(0,jsx_runtime.jsx)(CircularProgress.A,{size:20}):null,children:loading?"Processing...":"Ask Gemini"})]})}),(0,jsx_runtime.jsx)(Box.A,{sx:{mt:2},children:(0,jsx_runtime.jsx)(AgentKey_AgentKey,{apiKey,setApiKey,deleteKey:()=>{localStorage.removeItem("API_KEY"),setApiKey("")}})}),error&&(0,jsx_runtime.jsx)(Alert.A,{severity:"error",sx:{mt:2},children:error}),response&&(0,jsx_runtime.jsxs)(Paper.A,{elevation:3,sx:{p:3,mt:2},children:[(0,jsx_runtime.jsx)(Typography.A,{variant:"h6",gutterBottom:!0,children:"Answer:"}),(0,jsx_runtime.jsx)(lib.oz,{components:{p:_ref=>{let{node,...props}=_ref;return(0,jsx_runtime.jsx)(Typography.A,{paragraph:!0,...props})},code:_ref2=>{let{node,...props}=_ref2;return(0,jsx_runtime.jsx)("code",{style:{backgroundColor:"#f5f5f5",padding:"2px 4px",borderRadius:4},...props})}},children:response})]})]})},GeminiChat_GeminiChat=GeminiChat;GeminiChat.__docgenInfo={description:"",methods:[],displayName:"GeminiChat"};const theme=(0,createTheme.A)({palette:{mode:"light",primary:{main:"#1976d2"},secondary:{main:"#9c27b0"}}});function App(){return(0,jsx_runtime.jsxs)(ThemeProvider.A,{theme,children:[(0,jsx_runtime.jsx)(CssBaseline.Ay,{}),(0,jsx_runtime.jsx)(GeminiChat_GeminiChat,{})]})}const src_App=App;App.__docgenInfo={description:"",methods:[],displayName:"App"};const App_stories={title:"App",component:src_App},Default={args:{}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...Default.parameters?.docs?.source}}}}}]);